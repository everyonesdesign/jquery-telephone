/*Telephone - v0.0.1 - 2014-07-24
* https://github.com/everyonesdesign/jquery-telephone.git
* Copyright (c) 2014 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.telephone=function(b){function c(a){for(var b=0;b<i.length;b++)l.disc.css(i[b]+"transform","rotate("+a+"deg)")}function d(a){if(l.disc.rotate){var b=l.discContainer.offset(),d=b.left+l.disc.outerWidth()/2,e=b.top+l.disc.outerHeight()/2,f=a.pageX,g=a.pageY,h=Math.atan2(f-d,g-e),i=h*(180/Math.PI)*-1+90;i>0&&45>i?i=0:i>45&&90>i&&(i=90),c(i),l.disc.data("angle",i)}}function e(){a(j).stop(),l.disc.rotate=!0}function f(){l.disc.rotate=!1,j.deg=l.disc.data("angle"),j.deg&&a(j).animate({deg:360},{duration:500,step:function(a){for(var b=0;b<i.length;b++)c(a),l.disc.data("angle",a)}})}var g=a(this),h=a(document.body),i=["-moz-","-webkit-","-o-","-ms-",""],j={deg:0},k={};b=a.extend(k,b);var l={};l.object=a("<div class='jqt-container' style='display: none; position: absolute;'></div>"),l.tabs=a("<ul class='jqt-tabs'><li class='jqt-tab'>Buttons</li><li class='jqt-tab'>Disc</li></ul>");for(var m="",n=1;10>n;n++)m+="<li class='jqt-button jqt-button"+n+"'>"+n+"</li>";m+="<li class='jqt-button jqt-button0'>0</li>",l.buttons=a("<ul class='jqt-buttonsContainer'>"+m+"</ul>"),l.disc=a("<div class='jqt-disc'></div>");for(var o="",n=1;10>n;n++)o+="<li class='jqt-discNumber jqt-discNumber"+n+"'>"+n+"</li>";return o+="<li class='jqt-discNumber jqt-discNumber0'>0</li>",l.discContainer=a("<div class='jqt-discContainer'><ul class='jqt-discNumbersContainer'>"+o+"</ul></div>"),l.object.on({click:function(a){a.stopPropagation()}}),h.append(l.object),l.object.append(l.tabs),l.buttons.on("click","li",function(a){l.object.$input.val(l.object.$input.val()+a.target.innerHTML)}),l.object.append(l.buttons),l.discContainer.append(l.disc),l.disc.on({mousedown:function(a){e(),d(a)},mouseup:f}),l.object.append(l.discContainer),g.each(function(){var b=a(this);b.is(":text")&&b.on({focus:function(){var a=b.offset();l.object.show().css({top:a.top+b.outerHeight(),left:a.left}).$input=b},click:function(a){a.stopPropagation()}})}),h.on({click:function(){l.disc.rotate||l.object.hide(),f()},mousemove:d}),this}}(jQuery);