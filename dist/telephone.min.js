/*Telephone - v0.0.1 - 2014-07-24
* https://github.com/everyonesdesign/jquery-telephone.git
* Copyright (c) 2014 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.telephone=function(b){function c(a){for(var b=0;b<h.length;b++)j.disc.css(h[b]+"transform","rotate("+a+"deg)")}function d(){if(j.disc.rotate=!0,g.hasClass("jqt-rotating")){j.disc.stop();for(var a=0;a<h.length;a++)c(0),j.disc.data("angle",0)}else g.addClass("jqt-rotating")}function e(){var b=j.disc.data("angle");j.disc.rotate=!1,g.removeClass("jqt-rotating"),a({deg:b}).animate({deg:0},{duration:500,step:function(a){for(var b=0;b<h.length;b++)c(a),j.disc.data("angle",a)}})}var f=a(this),g=a(document.body),h=["-moz-","-webkit-","-o-","-ms-",""],i={};b=a.extend(i,b);var j={};j.object=a("<div class='jqt-container' style='display: none; position: absolute;'></div>"),j.tabs=a("<ul class='jqt-tabs'><li class='jqt-tab'>Buttons</li><li class='jqt-tab'>Disc</li></ul>");for(var k="",l=1;10>l;l++)k+="<li class='jqt-button jqt-button"+l+"'>"+l+"</li>";return k+="<li class='jqt-button jqt-button0'>0</li>",j.buttons=a("<ul class='jqt-buttonsContainer'>"+k+"</ul>"),j.disc=a("<div class='jqt-disc'></div>"),j.discContainer=a("<div class='jqt-discContainer'></div>"),j.object.on({click:function(a){a.stopPropagation()}}),g.append(j.object),j.object.append(j.tabs),j.buttons.on("click","li",function(a){j.object.$input.val(j.object.$input.val()+a.target.innerHTML)}),j.object.append(j.buttons),j.discContainer.append(j.disc),j.disc.on({mousedown:d,mouseup:e}),j.object.append(j.discContainer),f.each(function(){var b=a(this);b.is(":text")&&b.on({focus:function(){var a=b.offset();j.object.show().css({top:a.top+b.outerHeight(),left:a.left}).$input=b},click:function(a){a.stopPropagation()}})}),g.on({click:function(){j.disc.rotate||j.object.hide(),e()},mousemove:function(a){if(j.disc.rotate)for(var b=j.discContainer.offset(),d=b.left+j.disc.outerWidth()/2,e=b.top+j.disc.outerHeight()/2,f=a.pageX,g=a.pageY,i=Math.atan2(f-d,g-e),k=i*(180/Math.PI)*-1+180,l=0;l<h.length;l++)c(k),j.disc.data("angle",k)}}),this}}(jQuery);